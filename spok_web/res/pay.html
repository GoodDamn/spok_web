<!DOCTYPE html>
<head>

    <style>

        @import url('https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap');
        
        body {
            background-color: #08193A;
        }

        #btnGetDiv {
            justify-content: center;
            display: flex;
        }

        #btnGet {
            position: absolute;
            color: #ffffff;
            cursor: pointer;
            background-color: #4F66E8;
            padding: 5vh;
            border-radius: 3vh;
            font-family: "Open Sans", sans-serif;
            font-style: normal;
            font-weight: 700;
            font-size: 5vh;
            text-decoration: none;
            margin-top: 60vh;
        }

        #btnSignIn {
            position: absolute;
            color: #ffffff;
            background-color: #4F66E8;
            cursor: pointer;
        }

    </style>

    

</head>
<body>

    <button id="btnSignIn">Sign In With Apple</button>

    <div id="btnGetDiv">
        <a id="btnGet" href="http://localhost:8080/createOrder">
            Получить полный доступ
        </a>
    </div>

    <script src="https://www.gstatic.com/firebasejs/10.9.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.9.0/firebase-auth-compat.js"></script>

    <script type="module">
        // https://firebase.google.com/docs/web/setup#available-libraries

        function onSign(auth, provider) {
            auth.signInWithPopup(provider)
                .then((result) => {
                    let credential = result.credential;
                    console.log(credential, result.user);

                }).catch((error) => {
                    let errorCode = error.code;
                    console.log(error, error.code);
                });
        }

        window.onload = function () {

            const firebaseConfig = {
                apiKey: "AIzaSyB2sJKaPgcsZObdtKPQ-ZI5oSmXapz7OIQ",
                authDomain: "localhost",
            }

            const app = firebase.initializeApp(
                firebaseConfig
            );

            const auth = app.auth();

            let provider = new firebase.auth.OAuthProvider(
                'apple.com'
            );

            provider.addScope('email');
            provider.addScope('name');

            provider.setCustomParameters({
                locale: 'ru'
            });

            document.getElementById('btnSignIn')
                .addEventListener('click', () => {
                    onSign(auth, provider);
                });

        }

    </script>

</body>